<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>misty-py-wrapper.misty API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>misty-py-wrapper.misty</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from .api_wrappers import ApiWrapperMixin
from .asset import AssetMixin
from .system import SystemMixin
from .movement import Head, BothArms, DrivingMixin
from .navigation import MappingMixin
from typing import List
from io import BytesIO
import gtts

class Robot(MappingMixin, DrivingMixin, SystemMixin, AssetMixin, ApiWrapperMixin):
    &#34;&#34;&#34;Provide an interface to the Misty API and text-to-speech.

    &#34;&#34;&#34;
    def __init__(self, ip: str):
        &#34;&#34;&#34;Initialize Robot instance.&#34;&#34;&#34;
        super().__init__(ip)
        self.head = Head(ip)
        self.arms = BothArms(ip)

    def add_touch_sensor(self, event_name,
                         sensor_position: List[str] = None, **kwargs):
        &#34;&#34;&#34;Adds a touch sensor WebSocket connection to the given sensor positions.&#34;&#34;&#34;
        sensors = [&#39;Chin&#39;, &#39;HeadLeft&#39;, &#39;HeadRight&#39;, &#39;HeadBack&#39;, &#39;HeadFront&#39;, &#39;Scruff&#39;]
        if not sensor_position:
            conditions = None
        # if only one sensor
        elif isinstance(sensor_position, str):
            if sensor_position in sensors:
                conditions = [(&#39;sensorPosition&#39;, &#39;==&#39;, sensor_position)]
            else:
                raise ValueError(f&#39;Invalid sensor position {sensor_position}&#39;)
        # if more than one sensor
        else:
            exclude_sensors = sensors.copy()
            for sensor in sensor_position:
                if not sensor in sensors:
                    raise ValueError(f&#39;Invalid sensor position {sensor}&#39;)
                else:
                    exclude_sensors.remove(sensor)
            conditions = [(&#39;sensorPosition&#39;, &#39;!=&#39;, sensor) \
                          for sensor in exclude_sensors]
        self.add_websocket(&#39;TouchSensor&#39;, event_name, conditions=conditions, **kwargs)

    def text_to_speech(self, msg: str, lang: str = &#39;es&#39;,
                       file_name: str = &#39;temp.mp3&#39;,
                       delete_after: bool = True, **kwargs):
        &#34;&#34;&#34;Generate speech audio from text and play it in Misty.&#34;&#34;&#34;
        file_obj = BytesIO()
        sound = gtts.gTTS(msg, lang=lang, **kwargs)
        sound.write_to_fp(file_obj)
        self.save_audio(file_name, file=file_obj,
                        immediately_apply=True, overwrite_existing=True)
        if delete_after:
            self.delete_audio(file_name)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="misty-py-wrapper.misty.Robot"><code class="flex name class">
<span>class <span class="ident">Robot</span></span>
<span>(</span><span>ip: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Provide an interface to the Misty API and text-to-speech.</p>
<p>Initialize Robot instance.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Robot(MappingMixin, DrivingMixin, SystemMixin, AssetMixin, ApiWrapperMixin):
    &#34;&#34;&#34;Provide an interface to the Misty API and text-to-speech.

    &#34;&#34;&#34;
    def __init__(self, ip: str):
        &#34;&#34;&#34;Initialize Robot instance.&#34;&#34;&#34;
        super().__init__(ip)
        self.head = Head(ip)
        self.arms = BothArms(ip)

    def add_touch_sensor(self, event_name,
                         sensor_position: List[str] = None, **kwargs):
        &#34;&#34;&#34;Adds a touch sensor WebSocket connection to the given sensor positions.&#34;&#34;&#34;
        sensors = [&#39;Chin&#39;, &#39;HeadLeft&#39;, &#39;HeadRight&#39;, &#39;HeadBack&#39;, &#39;HeadFront&#39;, &#39;Scruff&#39;]
        if not sensor_position:
            conditions = None
        # if only one sensor
        elif isinstance(sensor_position, str):
            if sensor_position in sensors:
                conditions = [(&#39;sensorPosition&#39;, &#39;==&#39;, sensor_position)]
            else:
                raise ValueError(f&#39;Invalid sensor position {sensor_position}&#39;)
        # if more than one sensor
        else:
            exclude_sensors = sensors.copy()
            for sensor in sensor_position:
                if not sensor in sensors:
                    raise ValueError(f&#39;Invalid sensor position {sensor}&#39;)
                else:
                    exclude_sensors.remove(sensor)
            conditions = [(&#39;sensorPosition&#39;, &#39;!=&#39;, sensor) \
                          for sensor in exclude_sensors]
        self.add_websocket(&#39;TouchSensor&#39;, event_name, conditions=conditions, **kwargs)

    def text_to_speech(self, msg: str, lang: str = &#39;es&#39;,
                       file_name: str = &#39;temp.mp3&#39;,
                       delete_after: bool = True, **kwargs):
        &#34;&#34;&#34;Generate speech audio from text and play it in Misty.&#34;&#34;&#34;
        file_obj = BytesIO()
        sound = gtts.gTTS(msg, lang=lang, **kwargs)
        sound.write_to_fp(file_obj)
        self.save_audio(file_name, file=file_obj,
                        immediately_apply=True, overwrite_existing=True)
        if delete_after:
            self.delete_audio(file_name)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="misty-py-wrapper.navigation.MappingMixin" href="navigation.html#misty-py-wrapper.navigation.MappingMixin">MappingMixin</a></li>
<li><a title="misty-py-wrapper.movement.DrivingMixin" href="movement.html#misty-py-wrapper.movement.DrivingMixin">DrivingMixin</a></li>
<li><a title="misty-py-wrapper.system.SystemMixin" href="system.html#misty-py-wrapper.system.SystemMixin">SystemMixin</a></li>
<li><a title="misty-py-wrapper.asset.AssetMixin" href="asset.html#misty-py-wrapper.asset.AssetMixin">AssetMixin</a></li>
<li><a title="misty-py-wrapper.api_wrappers.ApiWrapperMixin" href="api_wrappers.html#misty-py-wrapper.api_wrappers.ApiWrapperMixin">ApiWrapperMixin</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="misty-py-wrapper.misty.Robot.add_touch_sensor"><code class="name flex">
<span>def <span class="ident">add_touch_sensor</span></span>(<span>self, event_name, sensor_position: List[str] = None, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds a touch sensor WebSocket connection to the given sensor positions.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_touch_sensor(self, event_name,
                     sensor_position: List[str] = None, **kwargs):
    &#34;&#34;&#34;Adds a touch sensor WebSocket connection to the given sensor positions.&#34;&#34;&#34;
    sensors = [&#39;Chin&#39;, &#39;HeadLeft&#39;, &#39;HeadRight&#39;, &#39;HeadBack&#39;, &#39;HeadFront&#39;, &#39;Scruff&#39;]
    if not sensor_position:
        conditions = None
    # if only one sensor
    elif isinstance(sensor_position, str):
        if sensor_position in sensors:
            conditions = [(&#39;sensorPosition&#39;, &#39;==&#39;, sensor_position)]
        else:
            raise ValueError(f&#39;Invalid sensor position {sensor_position}&#39;)
    # if more than one sensor
    else:
        exclude_sensors = sensors.copy()
        for sensor in sensor_position:
            if not sensor in sensors:
                raise ValueError(f&#39;Invalid sensor position {sensor}&#39;)
            else:
                exclude_sensors.remove(sensor)
        conditions = [(&#39;sensorPosition&#39;, &#39;!=&#39;, sensor) \
                      for sensor in exclude_sensors]
    self.add_websocket(&#39;TouchSensor&#39;, event_name, conditions=conditions, **kwargs)</code></pre>
</details>
</dd>
<dt id="misty-py-wrapper.misty.Robot.text_to_speech"><code class="name flex">
<span>def <span class="ident">text_to_speech</span></span>(<span>self, msg: str, lang: str = 'es', file_name: str = 'temp.mp3', delete_after: bool = True, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Generate speech audio from text and play it in Misty.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def text_to_speech(self, msg: str, lang: str = &#39;es&#39;,
                   file_name: str = &#39;temp.mp3&#39;,
                   delete_after: bool = True, **kwargs):
    &#34;&#34;&#34;Generate speech audio from text and play it in Misty.&#34;&#34;&#34;
    file_obj = BytesIO()
    sound = gtts.gTTS(msg, lang=lang, **kwargs)
    sound.write_to_fp(file_obj)
    self.save_audio(file_name, file=file_obj,
                    immediately_apply=True, overwrite_existing=True)
    if delete_after:
        self.delete_audio(file_name)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="misty-py-wrapper.navigation.MappingMixin" href="navigation.html#misty-py-wrapper.navigation.MappingMixin">MappingMixin</a></b></code>:
<ul class="hlist">
<li><code><a title="misty-py-wrapper.navigation.MappingMixin.delete_slam_map" href="navigation.html#misty-py-wrapper.navigation.MappingMixin.delete_slam_map">delete_slam_map</a></code></li>
<li><code><a title="misty-py-wrapper.navigation.MappingMixin.get_current_slam_map" href="navigation.html#misty-py-wrapper.navigation.MappingMixin.get_current_slam_map">get_current_slam_map</a></code></li>
<li><code><a title="misty-py-wrapper.navigation.MappingMixin.get_map" href="navigation.html#misty-py-wrapper.navigation.MappingMixin.get_map">get_map</a></code></li>
<li><code><a title="misty-py-wrapper.navigation.MappingMixin.get_slam_maps" href="navigation.html#misty-py-wrapper.navigation.MappingMixin.get_slam_maps">get_slam_maps</a></code></li>
<li><code><a title="misty-py-wrapper.navigation.MappingMixin.rename_slam_map" href="navigation.html#misty-py-wrapper.navigation.MappingMixin.rename_slam_map">rename_slam_map</a></code></li>
<li><code><a title="misty-py-wrapper.navigation.MappingMixin.start_mapping" href="navigation.html#misty-py-wrapper.navigation.MappingMixin.start_mapping">start_mapping</a></code></li>
<li><code><a title="misty-py-wrapper.navigation.MappingMixin.stop_mapping" href="navigation.html#misty-py-wrapper.navigation.MappingMixin.stop_mapping">stop_mapping</a></code></li>
</ul>
</li>
<li><code><b><a title="misty-py-wrapper.movement.DrivingMixin" href="movement.html#misty-py-wrapper.movement.DrivingMixin">DrivingMixin</a></b></code>:
<ul class="hlist">
<li><code><a title="misty-py-wrapper.movement.DrivingMixin.add_websocket" href="api_wrappers.html#misty-py-wrapper.api_wrappers.ApiWrapperMixin.add_websocket">add_websocket</a></code></li>
<li><code><a title="misty-py-wrapper.movement.DrivingMixin.drive" href="movement.html#misty-py-wrapper.movement.DrivingMixin.drive">drive</a></code></li>
<li><code><a title="misty-py-wrapper.movement.DrivingMixin.drive_arc" href="movement.html#misty-py-wrapper.movement.DrivingMixin.drive_arc">drive_arc</a></code></li>
<li><code><a title="misty-py-wrapper.movement.DrivingMixin.drive_heading" href="movement.html#misty-py-wrapper.movement.DrivingMixin.drive_heading">drive_heading</a></code></li>
<li><code><a title="misty-py-wrapper.movement.DrivingMixin.drive_time" href="movement.html#misty-py-wrapper.movement.DrivingMixin.drive_time">drive_time</a></code></li>
<li><code><a title="misty-py-wrapper.movement.DrivingMixin.drive_track" href="movement.html#misty-py-wrapper.movement.DrivingMixin.drive_track">drive_track</a></code></li>
<li><code><a title="misty-py-wrapper.movement.DrivingMixin.halt" href="movement.html#misty-py-wrapper.movement.DrivingMixin.halt">halt</a></code></li>
<li><code><a title="misty-py-wrapper.movement.DrivingMixin.stop" href="movement.html#misty-py-wrapper.movement.DrivingMixin.stop">stop</a></code></li>
<li><code><a title="misty-py-wrapper.movement.DrivingMixin.wrapper_delete" href="api_wrappers.html#misty-py-wrapper.api_wrappers.ApiWrapperMixin.wrapper_delete">wrapper_delete</a></code></li>
<li><code><a title="misty-py-wrapper.movement.DrivingMixin.wrapper_get" href="api_wrappers.html#misty-py-wrapper.api_wrappers.ApiWrapperMixin.wrapper_get">wrapper_get</a></code></li>
<li><code><a title="misty-py-wrapper.movement.DrivingMixin.wrapper_post" href="api_wrappers.html#misty-py-wrapper.api_wrappers.ApiWrapperMixin.wrapper_post">wrapper_post</a></code></li>
</ul>
</li>
<li><code><b><a title="misty-py-wrapper.system.SystemMixin" href="system.html#misty-py-wrapper.system.SystemMixin">SystemMixin</a></b></code>:
<ul class="hlist">
<li><code><a title="misty-py-wrapper.system.SystemMixin.set_default_volume" href="system.html#misty-py-wrapper.system.SystemMixin.set_default_volume">set_default_volume</a></code></li>
</ul>
</li>
<li><code><b><a title="misty-py-wrapper.asset.AssetMixin" href="asset.html#misty-py-wrapper.asset.AssetMixin">AssetMixin</a></b></code>:
<ul class="hlist">
<li><code><a title="misty-py-wrapper.asset.AssetMixin.delete_audio" href="asset.html#misty-py-wrapper.asset.AssetMixin.delete_audio">delete_audio</a></code></li>
<li><code><a title="misty-py-wrapper.asset.AssetMixin.get_audio_list" href="asset.html#misty-py-wrapper.asset.AssetMixin.get_audio_list">get_audio_list</a></code></li>
<li><code><a title="misty-py-wrapper.asset.AssetMixin.save_audio" href="asset.html#misty-py-wrapper.asset.AssetMixin.save_audio">save_audio</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="misty-py-wrapper" href="index.html">misty-py-wrapper</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="misty-py-wrapper.misty.Robot" href="#misty-py-wrapper.misty.Robot">Robot</a></code></h4>
<ul class="">
<li><code><a title="misty-py-wrapper.misty.Robot.add_touch_sensor" href="#misty-py-wrapper.misty.Robot.add_touch_sensor">add_touch_sensor</a></code></li>
<li><code><a title="misty-py-wrapper.misty.Robot.text_to_speech" href="#misty-py-wrapper.misty.Robot.text_to_speech">text_to_speech</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>